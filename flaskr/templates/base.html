<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/simple_styles.css') }}">
    <script type="text/javascript" src="{{ url_for('static',filename='node_modules/@pgrabovets/json-view/dist/jsonview.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static',filename='script/HandleMetaData.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static',filename='script/MongoDBQuery.js') }}"></script>
    <script>

        fetch('{{ url_for('static',filename='sample.json') }}')
        .then((res)=> {
          return res.text();
        })
        .then((data) => {
          document.getElementById("hidden_log_div").innerHTML = data;
          const tree = jsonview.create(data);
          jsonview.render(tree, document.querySelector('.query-result-root'));
          //jsonview.expand(tree);
        })
        .catch((err) => {
          console.log(err);
        })
    </script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="root-container">
    <div class="quarter-container">
        <div style="margin-left:10%; margin-top:75px;">
            <h3>MongoDB Query:</h3>
            <textarea id="mongoQuery" style="height:25vh; width:80%;"></textarea>
            <br><br>
            <button onclick="sendMongoDBQuery()">Send Query</button>
        </div>
    </div>

    <div class="quarter-container">
        <div style="margin-left:10%; margin-top:75px;">
            <h3>Metadata JSON:</h3>
            <textarea id="metadata_input" style="height:25vh; width:80%;"></textarea>
            <br><br>
            <button onclick="buildCheckList()">Apply Metadata Filter</button>
        </div>
    </div>

    <div class="quarter-container" style="overflow-y:scroll;">
        <div style="margin-left:10%; margin-top:75px;">
            <h3>Query Results:</h3>
            <div id="hidden_log_div" style="display:none"></div>
            <div id="log_output_div" class="query-result-root"></div>
        </div>
    </div>

    <div class="quarter-container" style="overflow-y:scroll;">
        <div style="margin-left:10%; margin-top:75px;">
            <h3>Logs Available By Metadata:</h3>
            <div id="metadata_output_div" class="metadata-result-root"></div>
        </div>
    </div>
</div>
</body>
</html>